(function(a){var e={init:function(b){b=b?b:{};0==a("#forms").length&&0==a("#debug").length&&a("body").append('<div class="row-fluid"><div class="span6" id="forms"></div><div class="span6" id="debug"></div></div>');a(this).webservices("formMaker",b)},formMaker:function(b){var d="",e=b.loaderGif?b.loaderGif:"webservicesjs/ajax-loader.gif";this.each(function(){d+='<div class="gradiant"><form method="'+this.method+'" action="'+this.action+'" class="form-horizontal "><h4>'+this.title+'<img src="'+e+'" /><br /><span class="muted">'+
this.action+"</span></h4>";for(var a in this.inputs){var b="f"+(new Date).getTime()*Math.random(),c=this.inputs[a];d+='<div class="control-group"><label class="span2" for="'+b+'">'+c.label+'</label><div class="controls"><input class="span12 input-mini" id="'+b+'" name="'+c.name+'" type="'+c.type+'" value="'+c.defaultvalue+'"/></div></div>'}d+='<div class="control-group"><div class="controls"><input type="submit" class="btn btn-primary btn-mini" /></div></div>';d+="</form></div>"});a("#forms").html(d);
a(this).webservices("initForm",b)},initForm:function(b){var d=b.proxyPath?!0:!1,e=b.loaderGif?b.loaderGif:"webservicesjs/ajax-loader.gif",j=b.proxyPath?b.proxyPath:"";a("#loader").hide();a("form").each(function(){a(this).find("img").hide();a(this).submit(function(){var b=(new Date).getTime();a("#loader").show();var c=a(this),g=c.attr("action"),k="GET"==c.attr("method")?"get":"post",h={};c.find("input[type=text],select").each(function(){var b=a(this).val(),c=a(this).attr("name");h[c]=b});d&&(g=j,h.u=
c.attr("action"));a(c).webservices("disableForm",!0);a("#debug").html('<img src="'+e+'" />processing...');a.ajax({type:k,url:g,data:h,cache:!1,complete:function(e){var f=(new Date).getTime();a("#loader").hide();a(c).webservices("disableForm",!1);a("#debug").html('<div class="well">Time : '+(f-b)/1E3+" secondes </div>");f='<div class="alert alert-info"><h4>Webservice path</h4>method : '+c.attr("method")+"<br/>";d?(f+="proxy : "+g+"<br/>",f+="url : "+c.attr("action")):f+="<p>url : "+g+"</p>";a("#debug").append(f+
"</div>");try{JSON.parse(e.responseText),a("#debug").append('<div class="alert alert-success"><h4>JSON</h4>format valid</div>')}catch(h){a("#debug").append('<div class="alert alert-error"><h4>JSON</h4>format not valid!</div>')}a("#debug").append("<h4>ResponseText</h4><pre>"+e.responseText+"</pre>")}});return!1})})},disableForm:function(b){b?this.find("img").show():this.find("img").hide();a("form").each(function(){a(this).find("label").each(function(){b?a(this).addClass("disable"):a(this).removeClass("disable")});
a(this).find("input").each(function(){b?a(this).attr("disabled","disabled"):a(this).removeAttr("disabled")})})}};a.fn.webservices=function(b){if(e[b])return e[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof b||!b)return e.init.apply(this,arguments);a.error("Method "+b+" does not exist on jQuery.webservices")}})(jQuery);